{% extends "base.html" %}

{% block main %}
<h1>Script Lines</h1>
<div>
    {% for line in scripts.script %}
        <div class="script-line">{{ line }}</div>
    {% endfor %}
</div>

<!-- 선택지 버튼 추가 -->
<div class="choices" style="margin-top: 20px;">
    <button id="choice1" style="padding: 10px 20px; margin-right: 10px;">선택지1</button>
    <button id="choice2" style="padding: 10px 20px; margin-right: 10px;">선택지2</button>
    <button id="dice" style="padding: 10px 20px;">주사위사용</button>
</div>

<!-- 채팅창 추가 -->
<div class="chatbox" style="margin-top: 20px;">
    <form action="#" method="post" style="display: flex; align-items: center;">
        <input 
            type="text" 
            name="user_input" 
            placeholder="직접 입력하기" 
            style="flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 4px; margin-right: 10px;">
        <button type="submit" style="padding: 10px 20px;">전송</button>
    </form>
</div>

<script>
    // 현재 URL에서 branch 파라미터를 추출하거나 0으로 설정
    function getBranchValue() {
        const urlParams = new URLSearchParams(window.location.search);
        let branchValue = parseInt(urlParams.get('branch')) || 0;  // branch 파라미터가 없으면 0으로 설정
        return branchValue;
    }

    // URL에 branch 파라미터 값 업데이트
    function updateBranch(newBranchValue) {
        const newUrl = window.location.pathname + '?branch=' + newBranchValue;
        window.location.href = newUrl;  // 페이지를 새로운 URL로 이동
    }

    // 버튼 클릭 시 branch 값을 증가시켜서 URL로 이동
    document.getElementById('choice1').addEventListener('click', function() {
        let branchValue = getBranchValue();
        branchValue++;  // branch 값 1 증가
        updateBranch(branchValue);
    });

    document.getElementById('choice2').addEventListener('click', function() {
        let branchValue = getBranchValue();
        branchValue++;  // branch 값 1 증가
        updateBranch(branchValue);
    });

    // 주사위 사용 버튼 클릭 시 branch 값 증가
    document.getElementById('dice').addEventListener('click', function() {
    });
</script>

{% endblock %}
