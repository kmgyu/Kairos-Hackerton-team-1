{% extends "base.html" %}

{% block main %}
<h1>Script Lines</h1>

<!-- branch 값에 따라 내용이 달라짐 -->
{{ script }}

<div class="choices" style="margin-top: 20px;">
    <button onclick="changeBranch()" style="padding: 10px 20px; margin-right: 10px;">선택지1</button>
    <button onclick="changeBranch()" style="padding: 10px 20px; margin-right: 10px;">선택지2</button>
    <button onclick="changeBranch()" style="padding: 10px 20px;">주사위사용</button>
</div>

<!-- 채팅창 추가 -->
<div class="chatbox" style="margin-top: 20px;">
    <form action="#" method="post" style="display: flex; align-items: center;">
        <input 
            type="text" 
            name="user_input" 
            placeholder="직접 입력하기" 
            style="flex: 1; padding: 10px; border: 1px solid #ccc; border-radius: 4px; margin-right: 10px;">
        <button type="submit" style="padding: 10px 20px;">전송</button>
    </form>
</div>

<script>
    function changeBranch() {
        // 현재 URL에서 'branch' 파라미터 값을 가져옴
        const url = new URL(window.location.href);
        let branch = parseInt(url.searchParams.get('branch') || 0);  // 기본값 0 설정

        // branch 값을 1 증가시킴
        branch += 1;

        // URL에 새로운 branch 값을 설정
        url.searchParams.set('branch', branch);

        // 새로운 URL로 리디렉션
        window.location.href = url.toString();
    }
</script>

{% endblock %}
